<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lead Sheet Generator - PDF-optimiert</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Merriweather:ital,wght@0,400;0,700;1,400&family=Roboto:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Dancing+Script:wght@400;700&family=Caveat:wght@400;700&family=Noto+Music&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="index.css">
</head>
  <body>
    <noscript>Sie m√ºssen JavaScript aktivieren, um diese App zu verwenden.</noscript>
    
    <div class="app-container">
      <main class="main-content">
        <div class="sheet-panel" aria-label="Lead Sheet Preview">
          
          <!-- Header Editor Toolbar -->
          <div id="header-editor-toolbar" class="header-editor-toolbar hidden">
              <div class="toolbar-group">
                  <label for="font-family-select">Schriftart:</label>
                  <select id="font-family-select"></select>
              </div>
              <div class="toolbar-group">
                  <label for="font-size-input">Gr√∂√üe:</label>
                  <input type="number" id="font-size-input" min="10" max="100" />
              </div>
          </div>

          <div class="sheet-music" id="sheet-music">
            <!-- Sheet content will be generated by JavaScript -->
          </div>
        </div>
      </main>
      
      <button id="add-line-btn" class="app-button add-line-button">
        Neue Zeile
      </button>
      <button id="help-btn" class="app-button help-button">
        ?
      </button>
      <button id="print-pdf-btn" class="app-button print-button">
        Drucken / PDF
      </button>
      <button id="export-png-btn" class="app-button export-button">
        Export als PNG
      </button>
    </div>

    <!-- Help Modal -->
    <div id="help-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button id="modal-close-btn" class="modal-close-btn">&times;</button>
            <h2>Hilfe & Anleitung</h2>
            <p><strong>Allgemeine Bedienung:</strong> Alle Elemente auf dem Notenblatt k√∂nnen direkt angeklickt werden, um sie zu bearbeiten. Ein Klick au√üerhalb des Elements speichert die √Ñnderung.</p>
            
            <dl>
                <dt>Kopfzeile (Titel, etc.)</dt>
                <dd>Klicken Sie auf "Titel", "Untertitel" oder "Stil", um den Text zu √§ndern. W√§hrend der Bearbeitung erscheint oben eine Werkzeugleiste, mit der Sie die <strong>Schriftart</strong> und <strong>Schriftgr√∂√üe</strong> anpassen k√∂nnen.</dd>
                
                <dt>Taktart</dt>
                <dd>Klicken Sie auf die Taktart (z.B. <code>4/4</code>) am Anfang des Blattes, um sie zu √§ndern. Die Anzahl der Eingabefelder pro Takt passt sich automatisch an die neue Taktart an (z.B. bei <code>3/4</code> werden 3 Felder angezeigt).</dd>

                <dt>Struktur bearbeiten</dt>
                <dd>
                  <ul>
                    <li><strong>Neue Zeile hinzuf√ºgen:</strong> Klicken Sie auf den Button "Neue Zeile" unten links.</li>
                    <li><strong>Zeile l√∂schen:</strong> Klicken Sie auf das gro√üe "√ó" am Ende einer Zeile. Dieser Knopf erscheint nur, wenn es mehr als eine Zeile gibt.</li>
                    <li><strong>Takt hinzuf√ºgen:</strong> Wenn eine Zeile weniger als vier Takte hat, erscheint am Ende der Zeile ein <code>+</code> Knopf, um einen neuen Takt hinzuzuf√ºgen.</li>
                    <li><strong>Takt l√∂schen:</strong> Fahren Sie mit der Maus √ºber einen Takt und klicken Sie auf das kleine "√ó" oben rechts. Dieser Knopf erscheint nur, wenn eine Zeile mehr als einen Takt hat.</li>
                  </ul>
                </dd>

                <dt>Inhalt bearbeiten</dt>
                <dd>
                  <ul>
                    <li><strong>Zeilentext:</strong> Klicken Sie in den leeren Bereich √ºber einer Notenzeile, um Anmerkungen wie "Intro", "Verse" oder "Chorus" hinzuzuf√ºgen. Die Textausrichtung kann gesteuert werden:
                        <ul>
                            <li><code>&lt;Verse</code>: Linksb√ºndig</li>
                            <li><code>&gt;Chorus</code>: Rechtsb√ºndig</li>
                            <li><code>Intro</code>: Zentriert (Standard)</li>
                        </ul>
                         Zus√§tzlich werden folgende musikalische Symbole automatisch erkannt (Gro√ü-/Kleinschreibung egal):
                        <ul>
                            <li><code>$</code>: Wird zum Segno-Zeichen (ùÑã).</li>
                            <li><code>Coda</code>: Wird zum Coda-Zeichen (ùÑå).</li>
                            <li><code>D.S.</code>: Wird zum Dal-Segno-Zeichen (ùÑâ).</li>
                            <li><code>D.C.</code>: Wird zum Da-Capo-Zeichen (ùÑä).</li>
                        </ul>
                    </li>
                    <li><strong>Akkorde im Takt:</strong> Klicken Sie in einen Takt, um die Eingabefelder f√ºr die Akkorde anzuzeigen.
                        <ul>
                            <li>Geben Sie Akkordsymbole ein (z.B. <code>C</code>, <code>Gm7</code>, <code>D/F#</code>).</li>
                            <li>Benutzen Sie einen Schr√§gstrich <code>/</code> f√ºr einen Taktschlag.</li>
                            <li>Geben Sie <code>%</code> in ein beliebiges Feld ein, um ein Taktwiederholungszeichen (Faulenzer) anzuzeigen.</li>
                            <li>Lassen Sie ein Feld leer f√ºr eine Pause auf diesem Schlag.</li>
                        </ul>
                    </li>
                    <li><strong>Endings (Volta-Klammern):</strong> Klicken Sie in den leeren Bereich <strong>√ºber</strong> einem Takt, um eine Klammer f√ºr eine 1. oder 2. Endung hinzuzuf√ºgen. Geben Sie den Text ein (z.B. <code>1.</code> oder <code>2.</code>). Wenn benachbarte Takte denselben Text haben, werden die Klammern automatisch zu einer l√§ngeren Klammer verbunden. Um eine Klammer zu entfernen, leeren Sie einfach den Text.</li>
                    <li><strong>Taktstriche:</strong> Klicken Sie auf einen Taktstrich, um ihn zu bearbeiten. Geben Sie eines der folgenden Symbole ein:
                        <ul>
                           <li><code>|</code> : Normaler Taktstrich</li>
                           <li><code>||</code> : Doppelter Taktstrich</li>
                           <li><code>|&lt;</code> : Anfangs-Wiederholungszeichen</li>
                           <li><code>&gt;|</code> oder <code>}</code> : End-Wiederholungszeichen</li>
                           <li><code>|||</code> : Schlussstrich</li>
                        </ul>
                    </li>
                  </ul>
                </dd>

                <dt>Export & Druck - PDF-optimiert</dt>
                <dd>
                    <ul>
                        <li><strong>Drucken / PDF:</strong> Erstellt eine professionell formatierte, druckoptimierte Version mit:
                            <ul>
                                <li>Automatischen, intelligenten Seitenumbr√ºchen</li>
                                <li>Konsistenten Schriftgr√∂√üen f√ºr besten Druck</li>
                                <li>Optimierten R√§ndern und Abst√§nden</li>
                                <li>Seitenzahlen bei mehrseitigen Dokumenten</li>
                            </ul>
                        </li>
                        <li><strong>Export als PNG:</strong> Speichert das Notenblatt als hochaufl√∂sende Bilddatei(en). Bei mehrseitigen Dokumenten wird f√ºr jede Seite eine separate PNG-Datei erstellt.</li>
                    </ul>
                </dd>
            </dl>
        </div>
    </div>
    <script type="module" src="index.js"></script>
  <script type="module" src="/index.tsx"></script>
</body>
</html>